<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Auto Test</title>
</head>
<body>
    <h1>WebSocket Auto Test</h1>
    <div id="status"></div>
    <script>
        window.onload = function() {
            document.getElementById('status').innerHTML = '<p>Testing WebSocket connections...</p>';
            
            // Test all WebSocket endpoints
            testWebSocket('/WSCTRX', 'Control');
            testWebSocket('/WSaudioRX', 'Audio RX');
            testWebSocket('/WSaudioTX', 'Audio TX');
        };
        
        function testWebSocket(endpoint, name) {
            var protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            var ws = new WebSocket(protocol + '//' + window.location.host + endpoint);
            
            ws.onopen = function() {
                document.getElementById('status').innerHTML += '<p style="color: green;">' + name + ' WebSocket connected successfully</p>';
                ws.close();
            };
            
            ws.onerror = function(error) {
                document.getElementById('status').innerHTML += '<p style="color: red;">' + name + ' WebSocket error: ' + error + '</p>';
            };
            
            ws.onclose = function() {
                document.getElementById('status').innerHTML += '<p>' + name + ' WebSocket closed</p>';
            };
        }
    </script>
</body>
</html>