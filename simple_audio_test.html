<!DOCTYPE html>
<html>
<head>
    <title>Simple Audio Test</title>
</head>
<body>
    <h1>Simple Audio Test</h1>
    <button id="testButton">Test Audio</button>
    <div id="status"></div>
    <script>
        let audioContext;
        
        document.getElementById('testButton').addEventListener('click', async function() {
            try {
                // Create audio context
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)({sampleRate: 8000});
                    document.getElementById('status').innerHTML += '<p>AudioContext created</p>';
                }
                
                // Resume if suspended
                if (audioContext.state === 'suspended') {
                    await audioContext.resume();
                    document.getElementById('status').innerHTML += '<p>AudioContext resumed</p>';
                }
                
                document.getElementById('status').innerHTML += `<p>AudioContext state: ${audioContext.state}</p>`;
                
                // Create test audio data (simple sine wave)
                const length = 8000 * 0.1; // 0.1 seconds
                const audioData = new Float32Array(length);
                for (let i = 0; i < length; i++) {
                    audioData[i] = Math.sin(2 * Math.PI * 440 * i / 8000); // 440Hz sine wave
                }
                
                // Play the audio
                const buffer = audioContext.createBuffer(1, audioData.length, 8000);
                buffer.copyToChannel(audioData, 0);
                
                const source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.connect(audioContext.destination);
                source.start();
                
                document.getElementById('status').innerHTML += '<p>Test audio played</p>';
                
            } catch (error) {
                document.getElementById('status').innerHTML += `<p>Error: ${error.message}</p>`;
                console.error('Audio test error:', error);
            }
        });
    </script>
</body>
</html>